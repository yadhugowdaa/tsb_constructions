---
import { getCollection } from 'astro:content';
import ServiceLayout from '../../../layouts/ServiceLayout.astro';

// Generate pages for all services in database
export async function getStaticPaths() {
  const services = await getCollection('services');
  return services.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<ServiceLayout 
  title={entry.data.title} 
  subtitle=""
  bgImage={entry.data.heroImage}
>

  <div class="max-w-7xl mx-auto px-6 py-12 md:py-20">
      
      <div class="prose prose-lg prose-slate max-w-none mb-16 text-gray-600">
          <Content />
      </div>

      {entry.data.gallery && (
          <div>
              <h3 class="text-2xl font-bold text-slate-900 mb-8 border-l-4 border-green-500 pl-4">Project Gallery</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                  {entry.data.gallery.map((img) => (
                      <div class="rounded-xl overflow-hidden shadow-lg h-64 hover:scale-105 transition duration-500 cursor-pointer">
                          <img src={img} class="w-full h-full object-cover" alt="Gallery Image" />
                      </div>
                  ))}
              </div>
          </div>
      )}

      <div class="mt-16 text-center">
          <a href="/contact" class="inline-block bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-10 rounded-full shadow-xl transition transform hover:-translate-y-1">
              Get a Quote for {entry.data.title}
          </a>
      </div>

  </div>

</ServiceLayout>